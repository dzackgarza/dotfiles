#!/bin/bash
source "../.bash_colors";

clr_green "Updating via package manager..";
command -v yaourt >/dev/null 2>&1 && sudo yaourt -Syuu --noconfirm;
command -v apt-get >/dev/null 2>&1 && sudo apt-get update && sudo apt-get -y upgrade && sudo apt-get -y autoremove && sudo apt-get autoclean;
clr_green "Updating calibre library..";
# calibre library update
clr_green "Forcing Dropbox sync..";
# dropbox sync
clr_green "Forcing Sparkleshare sync..";
# sparkleshare sync

clr_green "Moving PDFs to dropbox and converting ebooks..";
find ~/Downloads -name "*.djvu" -exec djvu2pdf {} \; -exec rm {} \;
find ~/Downloads -name "*.pdf" -exec mv {} ~/Dropbox \;

clr_green "Pushing dotfiles upstream..";
cd ~/dotfiles && git add -A && git commit -am "Update script" && git push origin master && cd -;

clr_green "Updating 'locate' database...";
sudo updatedb;
clr_green "Update completed.";
