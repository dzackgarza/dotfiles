#!/bin/bash

if [ $# -eq 0 ]; then
  echo "Supply filename as argument"
  exit 1;
fi

filepath=$(realpath "$1")
directory=$(dirname "$filepath")
filename=$(basename -- "$filepath")
extension="${filename##*.}"
filename="${filename%.*}"
first_run=true

echo "File path: $filepath"
echo "Directory: $directory"
echo "File name: $filename"
echo "Extension: $extension"

outfile="$directory/$filename.pdf"
echo "Rendering markdown to $outfile"
pandoc -f markdown -r markdown+tex_math_dollars+simple_tables+table_captions+yaml_metadata_block+smart+blank_before_blockquote+backtick_code_blocks+link_attributes --template=/home/zack/Dropbox/Document\ Archive/Latex/pandoc_template.tex  --resource-path="$directory" --pdf-engine=xelatex "$filepath" -o "$outfile"

xdg-open "$outfile";

