#!/bin/bash
# Test JACK audio session control via Cadence

set -e

echo "1. Stopping JACK..."
jack_control stop || echo "JACK was not running"
sleep 1

echo "2. Verifying stopped..."
if jack_control status > /dev/null 2>&1; then
    echo "ERROR: JACK still running"
    exit 1
fi
echo "✓ JACK stopped"
sleep 1

echo "3. Starting JACK..."
jack_control start
sleep 2

echo "4. Verifying running..."
if jack_control status > /dev/null 2>&1; then
    echo "✓ JACK started successfully"
    jack_control status
else
    echo "ERROR: JACK failed to start"
    exit 1
fi

echo "Done"
